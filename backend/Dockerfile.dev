FROM rust:1.81

WORKDIR /app

# Copy Cargo.toml (skip Cargo.lock as it may not exist)
COPY Cargo.toml ./

# Install cargo-watch for live reloading
RUN cargo install cargo-watch

# Copy the rest of the source code
COPY . .

# Build once to cache dependencies
RUN cargo build

# Start the server with live reload
CMD ["cargo", "watch", "-x", "run"] 